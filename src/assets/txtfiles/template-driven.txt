<-----------------HTML------------------>

 <form #regForm="ngForm" (ngSubmit)="onSubmit(regForm)">
 
        <!-- Full Name -->
        <div class="mb-3">
            <label class="form-label">Full Name</label>
            <input class="form-control" type="text" name="fullName" [(ngModel)]="user.fullName" required
                minlength="3" #fullName="ngModel">

            <p class="text-danger" *ngIf="(fullName.touched || submitted) && fullName.invalid">
                <span *ngIf="fullName.errors?.['required']">Full Name is required</span>
                <span *ngIf="fullName.errors?.['minlength']">Minimum 3 characters</span>
            </p>
        </div>


        <!-- Email -->
        <div class="mb-3">
            <label>Email</label>
            <input class="form-control" type="email" name="email" [(ngModel)]="user.email" required email
                #email="ngModel">

            <p class="text-danger" *ngIf="(email.touched || submitted) && email.invalid">
                <span *ngIf="email.errors?.['required']">Email required</span>
                <span *ngIf="email.errors?.['email']">Enter a valid email</span>
            </p>
        </div>


        <!-- Password -->
        <div class="mb-3">
            <label>Password</label>
            <input class="form-control" type="password" name="password" [(ngModel)]="user.password" required
                minlength="6" #password="ngModel">

            <p class="text-danger" *ngIf="(password.touched || submitted) && password.invalid">
                <span *ngIf="password.errors?.['required']">Password required</span>
                <span *ngIf="password.errors?.['minlength']">Minimum 6 characters</span>
            </p>
        </div>


        <!-- Confirm Password -->
        <div class="mb-3">
            <label>Confirm Password</label>
            <input class="form-control" type="password" name="confirmPassword"
                [(ngModel)]="user.confirmPassword" required #confirmPassword="ngModel">

            <p class="text-danger"
                *ngIf="(confirmPassword.touched || submitted) && confirmPassword.invalid">
                Confirm password is required
            </p>

            <p class="text-danger" *ngIf="submitted && passwordsDoNotMatch(regForm)">
                Passwords do not match!
            </p>
        </div>


        <!-- Gender -->
        <div class="mb-3">
            <label>Gender:</label><br>

            <input type="radio" name="gender" [(ngModel)]="user.gender" value="male" required
                #gender="ngModel" class="form-check-input">
            Male

            <input type="radio" name="gender" class="ms-3" [(ngModel)]="user.gender" value="female" required
                class="form-check-input"> Female
            <input type="radio" name="gender" class="ms-3" [(ngModel)]="user.gender" value="transgender"
                required class="form-check-input"> Trans gender
            <p class="text-danger" *ngIf="(gender.touched || submitted) && gender.invalid">
                Gender is required
            </p>
        </div>



        <!-- Country -->
        <div class="mb-3">
            <label>Country</label>
            <select class="form-control form-select" name="country" [(ngModel)]="user.country" required
                #country="ngModel">

                <option value="">-- Select Country --</option>
                <option value="india">India</option>
                <option value="usa">USA</option>
                <option value="uk">UK</option>
            </select>

            <p class="text-danger" *ngIf="(country.touched || submitted) && country.invalid">
                Country is required
            </p>
        </div>


        <!-- Terms -->
        <div class="mb-3">
            <input type="checkbox" class="form-check-input" name="terms" [(ngModel)]="user.terms" required
                #terms="ngModel">
            <label> &nbsp; I agree to the terms</label>

            <p class="text-danger d-block" *ngIf="(terms.touched || submitted) && terms.invalid">
                You must agree before continue
            </p>
        </div>


        <!-- Submit always enabled -->
        <button class="btn btn-primary">Register</button>

                </form>

<-------------------------TS CODE------------------------>   

import { CommonModule } from "@angular/common";
import { Component } from "@angular/core";
import { FormsModule, NgForm } from "@angular/forms";
import { RouterModule } from "@angular/router";

@Component({
  selector: "app-template-driven",
  templateUrl: "./template-driven.component.html",
  styleUrls: ["./template-driven.component.scss"],
  standalone: true,
  imports: [RouterModule, FormsModule,CommonModule]
})

export class TemplateDrivenComponent {
  submitted = false;

  user = {
    fullName: '',
    email: '',
    password: '',
    confirmPassword: '',
    gender: '',
    country: '',
    terms: false
  };
  formData: any;
  submitted1 = false;

  // Custom validation for password matching
  passwordsDoNotMatch(form: NgForm) {
    const pwd = form.controls['password']?.value;
    const cpwd = form.controls['confirmPassword']?.value;
    return pwd && cpwd && pwd !== cpwd;
  }

  onSubmit(form: NgForm) {
    this.submitted = true;

    // Make all fields show errors
    Object.values(form.controls).forEach(control => {
      control.markAsTouched();
    });

    // Prevent submit if invalid
    if (form.invalid || this.passwordsDoNotMatch(form)) {
      console.warn("Form has errors!");
      return;
    }

    this.formData = form.value

    console.log("FINAL FORM DATA ðŸ‘‰", form.value);
    alert("Registration Successful!");

    form.resetForm();
    this.submitted = false;
  }
}
